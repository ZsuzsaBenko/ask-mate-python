{% extends "layout.html" %}
{% block content %}
    <div class="form">
        {% if not add_answer and not question_comment and not answer_comment %}
            {% if current_answer %}
                <h1>Edit your answer</h1>
            {% elif current %}
                <h1>Edit your question</h1>
            {% else %}
                <h1>Add your question</h1>
            {% endif %}
        {% else %}
            {% if question_comment or answer_comment %}
                <h1>Add your comment</h1>
            {% else %}
                <h1>Add your answer</h1>
            {% endif %}
        {% endif %}
        <form {% if not add_answer and not current and not current_answer and not question_comment and not answer_comment %}
                    action="{{ url_for('route_form') }}"
                {% elif add_answer %} action="/question/{{ question_id }}/new_answer"
                {% elif current_answer %} action="/answer/{{ answer_id }}/edit"
                {% elif question_comment %} action="/question/{{ question_id }}/new_comment"
                {% elif answer_comment %} action="/answer/{{ answer_id }}/new_comment"
                {% else %} action="/question/{{ question_id }}/edit"
              {% endif %}
                method="post" enctype=multipart/form-data>
            {% if not add_answer and not current_answer and not question_comment and not answer_comment %}
                <label for="title">Title:</label>
                <input  id='title' name="title" type="text" {% if current %} value="{{ current['title'] }}" {% endif %} required>
            {% endif %}
             <label for="message">Message:</label>
             <textarea id="message" name="message" rows="10" cols="40" required>{% if current %} {{ current['message'] }}
                {% elif current_answer %} {{ current_answer['message'] }} {% endif %} </textarea>
            {% if not question_comment and not answer_comment %}
                <label for="file">Image:</label>
                <input type="file" id="file" name="file" {% if current %} value="{{ current['image'] }}"
                   {% elif current_answer %} value="{{ current_answer['image'] }}" {% endif %}>
            {% endif %}
            {% if not add_answer and not current_answer and not question_comment and not answer_comment %}
                <input type="submit" {% if current %} value="Edit question" {% else %} value="Submit question" {%  endif %}>
            {% elif not add_answer %}
                <input type="submit" {% if question_comment or answer_comment %} value="Submit comment"
                    {% elif current_answer %} value="Edit answer" {%  endif %}>
            {% else %}
                <input type="submit" value="Submit answer">
            {% endif %}
        </form>
    </div>
{% endblock %}